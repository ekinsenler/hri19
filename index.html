<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>HRI 2019</title>

  <script src="qaws.js"></script>

  <style>
    body {
      background-color: #fff;
      font-family: sans-serif;
    }
    h1 {
      font-weight: normal;
      font-size: 300%;
    }

  input[type=button] {
    background-color: #808080; /* Grey */
    border: none;
    border-radius: 8px;
    color: white;
    padding: 14px 24px;
    text-align: center;
    text-decoration: none;
    display: inline-block;
    font-size: 24px;
    margin:10px 10px 10px 10px;
  }

  </style>
</head>
<body>

    <!-- status -->
    <div align='left' id='status'> <font color='red'>NOT CONNECTED</font> </div>

    <!-- image -->
    <p>
    <div align='center'> <img height=300 id='image_default' src="img/welcome.jpg" alt="No image"/> </div>
    </p>

    <!-- text -->

    <p>
    <h1>
    <div align='center' id='text_default'>Welcome</div>
    </h1>
    </p>


    <br>

    <!-- buttons -->
    <div align='center' id='buttons'>
      <input type="button" id="run" value="Start" onclick="playgame()">
    </div>

  <!-- ****** SCRIPTS ****** -->

  <script>

    var ip=window.location.hostname;
    if (ip=='')
        ip='127.0.0.1';
    port = 9100;

    console.log("Trying connection...")
    wsrobot_init(ip,port);


    var codeport = 9010;
    var codeurl = "ws://"+ip+":"+codeport+"/websocketserver";
    console.log(codeurl);
    codews = new WebSocket(codeurl);

    var ctrlport = 9110;
    var ctrlurl = "ws://"+ip+":"+ctrlport+"/ctrlwebsocketserver";
    console.log(ctrlurl);
    ctrlws = new WebSocket(ctrlurl);

    function iminit() {
        codews.send(
            "begin()\n" +
            "im.setRelativeDemoPath('hri19')\n" +
            "im.init()\n" +        
            "robot.setAlive(True)\n" +
            "robot.normalPosture()\n" +
            "robot.startFaceDetection()\n" +
            "end()\n");
        console.log('IM init');
    }

    setTimeout(iminit,1000)

    function playgame() {
        console.log('playgame...');
        code = "\n" +
            "im.display.loadUrl('memorygame/game.html')\n"
        codews.send(code);
    }

  </script>

</body>
</html>
